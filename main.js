!function(){"use strict";var e=class{constructor(e){let{popupSelector:t}=e;console.log(t),this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal__opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal__opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&(console.log(e.key),this.close())};setEventListeners(){this._closeButton=this._popupElement.querySelector(".modal__close"),this._closeButton.addEventListener("click",(()=>{console.log("click"),this.close()})),this._popupElement.addEventListener("mousedown",(e=>{console.log(e.target.classList),e.target.classList.contains("modal")&&this.close()}))}},t=class extends e{constructor(e){let{popupSelector:t,handleFormSubmit:o}=e;super({popupSelector:t}),this.popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=o}close(){super.close(),this.popupForm.reset()}_getInputValues(){this._inputElements=[...this.popupForm.querySelectorAll(".modal__input")];const e={};return this._inputElements.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this.popupForm.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues())}))}},o=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,console.log(this)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);this._formElement.querySelector(`#${e.id}-input`),console.log(e.validationMessage),t.textContent=e.validationMessage,e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass)}_hideInputError(e){this._formElement.querySelector(`#${e.id}-error`).textContent="",e.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass)}_disableButton(){this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)}_enableButton(){this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)}_toggleButtonState(){this._isFormValid()?this._enableButton():this._disableButton()}resetValidation(){this._formElement.reset(),this._disableButton(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_isFormValid=()=>this._inputList.every((e=>!0===e.validity.valid));_checkInputValidity=e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e)};_setEventListeners(){this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputList,this._submitButton)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners(),console.log(this)}};const s=document.querySelector("#profile-edit-modal"),n=s.querySelector(".modal__form"),r=document.querySelector("#profile-edit-button"),i=(s.querySelector(".modal__close"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-container"),document.querySelector("#add-card-modal")),l=i.querySelector(".modal__form"),a=(i.querySelector(".modal__close"),document.querySelector(".profile__add-button")),c=(i.querySelector("#add-card-container"),i.querySelector(".modal__button"),document.querySelector(".cards__list"),document.querySelector("#preview-image-modal")),u=(c.querySelector(".modal__image"),c.querySelector(".modal__image-name"),c.querySelector(".modal__close"),document.querySelector("#profile-title-input")),m=document.querySelector("#profile-description-input"),_=(i.querySelector(".modal__input_type_title"),i.querySelector(".modal__input_type_url"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"}),d=(document.querySelector(_.formSelector),new o(_,n)),p=new o(_,l);d.enableValidation(),p.enableValidation(),document.querySelector("#card-template").content.firstElementChild;const h=new class{constructor(e,t){let{items:o,renderer:s}=e;this._items=o,this._renderer=s,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=y(e);h.addItem(t)}},".cards__list");h.renderItems();const S=new class extends e{constructor(e){super({popupSelector:e})}open(e,t){const o=this._popupElement.querySelector(".modal__image"),s=this._popupElement.querySelector(".modal__image-name");o.src=t,o.alt=e,s.textContent=e,super.open()}}("#preview-image-modal");function E(e,t){S.open(e,t)}function y(e,t){return new class{constructor(e,t,o){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=o}_setEventListeners(){this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeIcon())),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCard())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleCardClick(this._name,this._link)))}_handleLikeIcon(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._element.remove()}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._element=this._getTemplate(),this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__image").alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._element}testMethod(){console.log(this._link),console.log(this._name),console.log(this._getTemplate())}}(e,"#card-template",E).getView()}S.setEventListeners();const g=new class{constructor(e){let{nameSelector:t,jobSelector:o}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(o)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:o}=e;this._nameElement.textContent=t,this._jobElement.textContent=o}}({nameSelector:".profile__title",jobSelector:".profile__description"});r.addEventListener("click",(()=>{const e=g.getUserInfo();u.value=e.name,m.value=e.job,v.open()})),a.addEventListener("click",(()=>{p.resetValidation(),b.open()}));const v=new t({popupSelector:"#profile-edit-modal",handleFormSubmit:e=>{g.setUserInfo({name:e.title,job:e.description}),v.close()}});v.setEventListeners();const b=new t({popupSelector:"#add-card-modal",handleFormSubmit:e=>{console.log(e);const t=y(e);h.addItem(t),b.close()}});b.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdIZ0g0QixDQUM1QkwsYUFBYyxrQkFDZEMsWUFBYSwwQkFHZnJELEVBQWtCN0QsaUJBQWlCLFNBQVMsS0FDMUMsTUFBTXlILEVBQU9ULEVBQVNLLGNBQ3RCbkQsRUFBa0IxQyxNQUFRaUcsRUFBS2xHLEtBQy9CNEMsRUFBd0IzQyxNQUFRaUcsRUFBS0gsSUFDckNJLEVBQVk3SCxNQUFNLElBT3BCbUUsRUFBaUJoRSxpQkFBaUIsU0FBUyxLQUN6Q3dFLEVBQWlCdEIsa0JBQ2pCeUUsRUFBUTlILE1BQU0sSUFPaEIsTUFBTTZILEVBQWMsSUFBSUUsRUFBYyxDQUNwQ3RJLGNBQWUsc0JBQ2ZzQixpQkFBbUJRLElBQ2pCNEYsRUFBU08sWUFBWSxDQUNuQmhHLEtBQU1ILEVBQVl5RyxNQUNsQlAsSUFBS2xHLEVBQVkwRyxjQUVuQkosRUFBWXhILE9BQU8sSUFJdkJ3SCxFQUFZbkgsb0JBTVosTUFBTW9ILEVBQVUsSUFBSUMsRUFBYyxDQUNoQ3RJLGNBQWUsa0JBQ2ZzQixpQkFBbUJRLElBQ2pCN0IsUUFBUUMsSUFBSTRCLEdBQ1osTUFBTXFFLEVBQU9DLEVBQVd0RSxHQUN4QnVELEVBQWdCUyxRQUFRSyxHQUd4QmtDLEVBQVF6SCxPQUFPLElBSW5CeUgsRUFBUXBILG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgY29uc29sZS5sb2cocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX19vcGVuZWRcIik7XG4gICAgLy8gdGhpcy5faGFuZGxlRXNjQ2xvc2UoKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICBjb25zb2xlLmxvZyhldnQua2V5KTtcbiAgICAgIC8vIHNlYXJjaCBmb3IgYW4gb3BlbmVkIG1vZGFsXG4gICAgICAvLyBjbG9zZSBpdFxuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJjbGlja1wiKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhldnQudGFyZ2V0LmNsYXNzTGlzdCk7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMucG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXTtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnBvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTm90ZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vLyB3ZSBuZWVkIHRvIGFkZCB0aGUgb3BlbiB0b3dhcmRzIHRoZSBlZGl0IHByb2ZpbGUgYnV0dG9uIHNpbmNlIGl0cyBzdXBwb3NlZCB0byBsaXN0ZW4gZm9yIHRoZSBjbGljaywgbm90IHRoZSBtb2RhbC5cbiIsIi8vbGVmdCBvZmYgYXQgMzAgbWlucyBpbiB0aGUgdmlkZW9cblxuLy9JbiBvcmRlciBmb3IgdGhlIGNvZGUgdG8gd29yayB5b3UgbmVlZCB0byBpbXBsZW1lbnQgaXRzIHVzZSBieSBpbXBvcnRpbmcgaXQgaW50byB0aGUgaW5kZXguanMgZG9jdW1lbnQgYW5kIGNhbGxpbmcgdXBvbiB0aGUgRm9ybVZhbGlkYXRvciBieSB1c2luZyBuZXcgRm9ybVZhbGlkYXRvciBhbmQgbWFraW5nIGl0IGJlbG9uZyB0byBhbiBvYmplY3RcblxuLy9Gcm9tIHJlc2VhcmNoaW5nIGFuZCB3YXRjaGluZyB0aGUgdmlkZW8gYWdhaW4sIHRoZSBvbGQgY29kZSBpcyBiZWxvdyB0aGUgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uIFZWVlZcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgIENsYXNzIEZvcm1WYWxpZGF0b3IgYW5kIGl0cyBjb2RlICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIGNvbnNvbGUubG9nKHRoaXMpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgY29uc3QgbW9kYWxJbnB1dEVycm9yID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dC5pZH0taW5wdXRgXG4gICAgKTtcbiAgICAvLyBhZGQgZXJyb3IgbWVzc3NhZ2UvY2xhc3NcbiAgICBjb25zb2xlLmxvZyhpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgLy8gYWRkIGVycm9yIG1lc3NzYWdlL2NsYXNzXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICghdGhpcy5faXNGb3JtVmFsaWQoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfSk7XG4gIH1cblxuICBfaXNGb3JtVmFsaWQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkID09PSB0cnVlKTtcbiAgfTtcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0KSA9PiB7XG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXG4gICAgXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX3N1Ym1pdEJ1dHRvbik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiBldnQucHJldmVudERlZmF1bHQoKSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuIiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbXBvcnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgIFZhcmlhYmxlcyB0aGF0IGJlbG9uZyB0byBwcm9maWxlLWVkaXQtbW9kYWwgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWNvbnRhaW5lclwiKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgIFZhcmlhYmxlcyB0aGF0IGJlbG9uZyB0byB0aGUgYWRkLWNhcmQtbW9kYWwgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBhZGRDYXJkRm9ybSA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgYWRkQ2FyZENvbnRhaW5lciA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWNvbnRhaW5lclwiKTtcbmNvbnN0IGFkZENhcmRTdWJtaXRCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgV3JhcHBlcnMgYWthIGRpdiB3cmFwcGVycyBmcm9tIHRoZSBodG1sIGRvY3VtZW50ICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuY29uc3QgY2FyZHNXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xuXG4vL0J1dHRvbnMgYW5kIG90aGVyIERPTSBub2RlcyAoRG9jdW1lbnQgT2JqZWN0IE1vZGVsKVxuXG4vL1dlJ2xsIGJlIGFibGUgdG8gdGFyZ2V0IHRoZSBpbWFnZSBzcmMgYnkgdXNpbmcgdGhlIHByZXZpZXcgaW1hZ2UgdmFyaWFibGUgaGVyZSBWVlZWVlxuY29uc3QgcHJldmlld0ltYWdlID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3SW1hZ2VOYW1lID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtbmFtZVwiKTtcbmNvbnN0IHByZXZpZXdJbWFnZUNsb3NlQnV0dG9uID1cbiAgcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5cbi8vcGxhY2UgcHJldmlld0ltYWdlTW9kYWwgaGVyZSBhbmQgeW91IG5lZWQgdG8gd3JpdGUgc29tZSBjb2RlIGluIHRoZSBodG1sIGRvY3VtZW50XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvcm0gRGF0YSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfdHlwZV90aXRsZVwiKTtcbmNvbnN0IGNhcmRVcmxJbnB1dCA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX3VybFwiKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbiBzZXR0aW5ncyBhbmQgdGhlIGZvcm0gZWxlbWVudCAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtU2VsZWN0b3IpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgIEZvcm0gdmFsaWRhdG9ycyBmcm9tIEZvcm1WYWxpZGF0b3IuanMgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgcHJvZmlsZUVkaXRGb3JtXG4pO1xuXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhZGRDYXJkRm9ybSk7XG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXJkIHNlbGVjdG9yICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBjYXJkU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XG5jb25zdCBjYXJkTGlzdFNlbGVjdG9yID0gXCIuY2FyZHNfX2xpc3RcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb24gdG8gUmVuZGVyQ2FyZCAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBzZWN0aW9uUmVuZGVyZXIgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IHJlbmRlckNhcmQoY2FyZERhdGEpO1xuICAgICAgc2VjdGlvblJlbmRlcmVyLmFkZEl0ZW0oY2FyZCk7XG4gICAgfSxcbiAgfSxcbiAgY2FyZExpc3RTZWxlY3RvclxuKTtcbnNlY3Rpb25SZW5kZXJlci5yZW5kZXJJdGVtcygpO1xuXG5jb25zdCBpbWFnZVByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xuaW1hZ2VQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XG4gIGltYWdlUHJldmlld1BvcHVwLm9wZW4obmFtZSwgbGluayk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEsIHdyYXBwZXIpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljayk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZS1lZGl0LWJ1dHRvbiBPTEQgQ09ERSAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59KTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgaW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gaW5mby5uYW1lO1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGluZm8uam9iO1xuICBwcm9maWxlQ2FyZC5vcGVuKCk7XG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZC1uZXctY2FyZCBPTEQgQ09ERSAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIG5ld0NhcmQub3BlbigpO1xufSk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGVDYXJkIGluc3RhbnRpYXRlICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgcHJvZmlsZUNhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICBuYW1lOiBpbnB1dFZhbHVlcy50aXRsZSxcbiAgICAgIGpvYjogaW5wdXRWYWx1ZXMuZGVzY3JpcHRpb24sXG4gICAgfSk7XG4gICAgcHJvZmlsZUNhcmQuY2xvc2UoKTtcbiAgfSxcbn0pO1xuXG5wcm9maWxlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NhcmQgaW5zdGFudGlhdGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IG5ld0NhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dFZhbHVlcykgPT4ge1xuICAgIGNvbnNvbGUubG9nKGlucHV0VmFsdWVzKTtcbiAgICBjb25zdCBjYXJkID0gcmVuZGVyQ2FyZChpbnB1dFZhbHVlcyk7XG4gICAgc2VjdGlvblJlbmRlcmVyLmFkZEl0ZW0oY2FyZCk7XG4gICAgLy8gY29uc3QgbmFtZSA9IGNhcmRUaXRsZUlucHV0LnZhbHVlO1xuICAgIC8vIGNvbnN0IGxpbmsgPSBjYXJkVXJsSW5wdXQudmFsdWU7XG4gICAgbmV3Q2FyZC5jbG9zZSgpO1xuICB9LFxufSk7XG5cbm5ld0NhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4vQ2FyZC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIGNvbnN0IHByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICBjb25zdCBwcmV2aWV3SW1hZ2VOYW1lID1cbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1uYW1lXCIpO1xuXG4gICAgcHJldmlld0ltYWdlLnNyYyA9IGxpbms7XG4gICAgcHJldmlld0ltYWdlLmFsdCA9IG5hbWU7XG4gICAgcHJldmlld0ltYWdlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xuIiwiLy9taWdodCBuZWVkIHRvIGltcG9ydCB0aGUgUG9wdXBXaXRoSW1hZ2UgZnJvbSB0aGUgZmlsZSBpbiBvcmRlciB0byBjb25uZWN0IGl0IHByb2JhYmx5IG1heWJlIGp1c3QgaW4gY2FzZSBoZXJlcyB0aGUgY29kZSwganVzdCB1bmNvbW1lbnRcbi8vIGltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUljb24oKSk7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCkpO1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxuICAgICAgKTtcbiAgICAvL1dlIGNhbiBzaG9ydGVuIG91dCB0aGUgY2FyZEltYWdlRWwgYnkgbWFraW5nIGEgZnVuY3Rpb24gd2l0aGluIHRoaXMgY2xhc3MgYW5kIHBhc3NpbmcgaXQgdGhyb3VnaCBmb3Igc2ltcGxpY2l0eSBzYWtlcywgYnV0IGZvY3VzIG9uIG1ha2luZyB0aGUgcm91Z2ggZW5kIG9mIHRoZSBjb2RlLlxuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgdGVzdE1ldGhvZCgpIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9saW5rKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9uYW1lKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9nZXRUZW1wbGF0ZSgpKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgLy9zZXRzIHRoZSB1c2VyIGluZm8gYW5kIGlmIHBsYWNlZCBiYWNrd2FyZHMgcGxhY2VzIHRoZSBvYmplY3QgW2h0bWx0ZXh0XVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgam9iIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiY29uc29sZSIsImxvZyIsInRoaXMiLCJfcG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwib3BlbiIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsIl9jbG9zZUJ1dHRvbiIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJwb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0RWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRWYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInRleHRDb250ZW50IiwiX2hpZGVJbnB1dEVycm9yIiwiX2Rpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lzRm9ybVZhbGlkIiwicmVzZXRWYWxpZGF0aW9uIiwiX2lucHV0TGlzdCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJwcm9maWxlRWRpdE1vZGFsIiwicHJvZmlsZUVkaXRGb3JtIiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGRDYXJkTW9kYWwiLCJhZGRDYXJkRm9ybSIsImFkZE5ld0NhcmRCdXR0b24iLCJwcmV2aWV3SW1hZ2VNb2RhbCIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwic2VjdGlvblJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImxpbmsiLCJjYXJkRGF0YSIsImNhcmQiLCJyZW5kZXJDYXJkIiwiaW1hZ2VQcmV2aWV3UG9wdXAiLCJwcmV2aWV3SW1hZ2UiLCJwcmV2aWV3SW1hZ2VOYW1lIiwic3JjIiwiYWx0IiwiaGFuZGxlQ2FyZENsaWNrIiwid3JhcHBlciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZWxlbWVudCIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwidG9nZ2xlIiwiX2dldFRlbXBsYXRlIiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsInRlc3RNZXRob2QiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJpbmZvIiwicHJvZmlsZUNhcmQiLCJuZXdDYXJkIiwiUG9wdXBXaXRoRm9ybSIsInRpdGxlIiwiZGVzY3JpcHRpb24iXSwic291cmNlUm9vdCI6IiJ9